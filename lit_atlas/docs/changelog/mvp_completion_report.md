# ã€Šå¢¨è¿¹ä¸è¾¹ç•Œã€‹MVPå¼€å‘å®ŒæˆæŠ¥å‘Š

**ç”Ÿæˆæ—¶é—´**: 2025-12-16 06:26  
**ç‰ˆæœ¬**: v0.1.0-MVP  
**å¼€å‘å‘¨æœŸ**: 1å¤©

## ğŸ¯ é¡¹ç›®æ¦‚è¿°

æˆåŠŸæ„å»ºäº†"å¢¨è¿¹ä¸è¾¹ç•Œ"é¡¹ç›®çš„MVPç‰ˆæœ¬ï¼Œè¿™æ˜¯ä¸€ä¸ªåŸºäºNext.jså’ŒTypeScriptçš„æ–‡å­¦ä½œå“åœ°ç†å™äº‹å¯è§†åŒ–å¹³å°ã€‚è¯¥å¹³å°èƒ½å¤Ÿå°†æ–‡å­¦ä½œå“ä¸­çš„åœ°ç†ä¿¡æ¯è¿›è¡Œå¯è§†åŒ–å‘ˆç°ï¼Œæ”¯æŒäº¤äº’å¼åœ°å›¾æµè§ˆå’Œæ’­æ”¾æ§åˆ¶ã€‚

## âœ… å·²å®ŒæˆåŠŸèƒ½

### 1. åŸºç¡€è®¾æ–½ä¸å·¥ç¨‹è§„èŒƒ âœ“
- [x] Next.js 16 + TypeScript + App Router è„šæ‰‹æ¶
- [x] ESLint + Prettier ä»£ç è§„èŒƒé…ç½®
- [x] Husky + lint-staged Gité’©å­
- [x] Storybook ç»„ä»¶æ–‡æ¡£æ¡†æ¶
- [x] GitHub Actions CI/CD ç®¡çº¿
- [x] Jest + Testing Library æµ‹è¯•æ¡†æ¶

### 2. æ•°æ®ç¼–æ’ä¸çŠ¶æ€ç®¡ç† âœ“
- [x] **æ•°æ®åŠ è½½å™¨** (`src/core/data/dataLoader.ts`)
  - æ”¯æŒä½œè€…JSONæ•°æ®åŠ è½½å’Œç¼“å­˜
  - é”™è¯¯å¤„ç†å’Œé‡è¯•æœºåˆ¶
  - é¢„åŠ è½½åŠŸèƒ½

- [x] **æ•°æ®è§„èŒƒåŒ–å™¨** (`src/core/data/normalizers.ts`)
  - åŸºäºZodçš„ä¸¥æ ¼ç±»å‹éªŒè¯
  - åæ ‡ã€åœ°ç†ä¿¡æ¯ã€ä½œå“æ•°æ®è§„èŒƒåŒ–
  - ä¸šåŠ¡è§„åˆ™éªŒè¯

- [x] **åœ°ç†åæ ‡å·¥å…·** (`src/utils/geo/coordinateUtils.ts`)
  - åœ°ç†æŠ•å½±è½¬æ¢
  - è·ç¦»è®¡ç®—å’Œè¾¹ç•Œç›’è®¡ç®—
  - ä¸­å›½åŒºåŸŸéªŒè¯

- [x] **çŠ¶æ€ç®¡ç†ç³»ç»Ÿ**
  - ä½œè€…çŠ¶æ€Store (`src/core/state/authorStore.ts`)
  - æ’­æ”¾çŠ¶æ€Store (`src/core/state/playbackStore.ts`)
  - RxJSäº‹ä»¶æ€»çº¿é›†æˆ

### 3. åœ°å›¾æ¸²æŸ“ä¸äº¤äº’ âœ“
- [x] **åŸºç¡€åœ°å›¾ç»„ä»¶** (`src/core/map/SimpleMap.tsx`)
  - React-Simple-Maps é›†æˆ
  - ä¸–ç•Œåœ°å›¾æ¸²æŸ“
  - äº¤äº’å¼å›½å®¶é€‰æ‹©

- [x] **é«˜çº§åœ°å›¾æ¡†æ¶** (`src/core/map/NarrativeMap.tsx`)
  - ç›¸æœºæ§åˆ¶å™¨ (`src/core/map/cameraController.ts`)
  - è§†å£äº¤äº’ç®¡ç† (`src/core/map/useViewportInteraction.ts`)
  - å›¾å±‚ç®¡ç†ç³»ç»Ÿ (`src/core/map/layers.ts`)

### 4. ç”¨æˆ·ç•Œé¢ä¸æ¼”ç¤º âœ“
- [x] **æ¼”ç¤ºé¡µé¢** (`src/app/demo/page.tsx`)
  - å®Œæ•´çš„MVPæ¼”ç¤ºç•Œé¢
  - ä½œè€…é€‰æ‹©å’Œæ’­æ”¾æ§åˆ¶
  - å®æ—¶çŠ¶æ€æ˜¾ç¤º
  - åŠŸèƒ½è¯´æ˜é¢æ¿

### 5. ç¤ºä¾‹æ•°æ® âœ“
- [x] é²è¿…ä½œè€…æ•°æ® (`public/data/authors/lu_xun.json`)
- [x] å·´é‡‘ä½œè€…æ•°æ® (`public/data/authors/ba_jin.json`)
- [x] åŒ…å«åœ°ç†è·¯çº¿å’Œä½œå“ä¿¡æ¯

## ğŸ—ï¸ æŠ€æœ¯æ¶æ„

### æ ¸å¿ƒæŠ€æœ¯æ ˆ
- **å‰ç«¯æ¡†æ¶**: Next.js 16.0.10 + React 19.2.1
- **ç±»å‹ç³»ç»Ÿ**: TypeScript 5
- **çŠ¶æ€ç®¡ç†**: Zustand 5.0.9 + RxJS 7.8.2
- **åœ°å›¾æ¸²æŸ“**: React-Simple-Maps 3.0.0 + D3 7.9.0
- **åŠ¨ç”»åº“**: Framer Motion 12.23.26
- **æ•°æ®éªŒè¯**: Zod 4.2.1
- **æµ‹è¯•æ¡†æ¶**: Jest 29.7.0 + Testing Library

### é¡¹ç›®ç»“æ„
```
src/
â”œâ”€â”€ app/                    # Next.js App Router
â”‚   â”œâ”€â”€ demo/page.tsx      # MVPæ¼”ç¤ºé¡µé¢
â”‚   â”œâ”€â”€ layout.tsx         # æ ¹å¸ƒå±€
â”‚   â””â”€â”€ page.tsx           # é¦–é¡µ
â”œâ”€â”€ core/                   # æ ¸å¿ƒä¸šåŠ¡é€»è¾‘
â”‚   â”œâ”€â”€ data/              # æ•°æ®å±‚
â”‚   â”‚   â”œâ”€â”€ dataLoader.ts  # æ•°æ®åŠ è½½å™¨
â”‚   â”‚   â””â”€â”€ normalizers.ts # æ•°æ®è§„èŒƒåŒ–
â”‚   â”œâ”€â”€ map/               # åœ°å›¾ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ SimpleMap.tsx  # ç®€åŒ–åœ°å›¾ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ NarrativeMap.tsx # å®Œæ•´åœ°å›¾ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ cameraController.ts # ç›¸æœºæ§åˆ¶
â”‚   â”‚   â”œâ”€â”€ useViewportInteraction.ts # äº¤äº’ç®¡ç†
â”‚   â”‚   â””â”€â”€ layers.ts      # å›¾å±‚ç®¡ç†
â”‚   â””â”€â”€ state/             # çŠ¶æ€ç®¡ç†
â”‚       â”œâ”€â”€ authorStore.ts # ä½œè€…çŠ¶æ€
â”‚       â””â”€â”€ playbackStore.ts # æ’­æ”¾çŠ¶æ€
â”œâ”€â”€ utils/                  # å·¥å…·å‡½æ•°
â”‚   â””â”€â”€ geo/coordinateUtils.ts # åœ°ç†å·¥å…·
â””â”€â”€ styles/                 # æ ·å¼æ–‡ä»¶
public/
â””â”€â”€ data/authors/          # ä½œè€…æ•°æ®
    â”œâ”€â”€ lu_xun.json
    â””â”€â”€ ba_jin.json
```

## ğŸ® MVPæ¼”ç¤ºè¯´æ˜

### è®¿é—®æ–¹å¼
1. å¯åŠ¨å¼€å‘æœåŠ¡å™¨: `npm run dev`
2. è®¿é—®: http://localhost:3000/demo

### ä¸»è¦åŠŸèƒ½
1. **ä½œè€…é€‰æ‹©**: ç‚¹å‡»å·¦ä¾§é¢æ¿é€‰æ‹©é²è¿…æˆ–å·´é‡‘
2. **åœ°å›¾äº¤äº’**: ç‚¹å‡»ä¸–ç•Œåœ°å›¾ä¸Šçš„å›½å®¶/åœ°åŒº
3. **æ’­æ”¾æ§åˆ¶**: ä½¿ç”¨æ’­æ”¾/æš‚åœ/åœæ­¢æŒ‰é’®
4. **çŠ¶æ€ç›‘æ§**: å®æ—¶æŸ¥çœ‹ç³»ç»ŸçŠ¶æ€å’Œä½œè€…ä¿¡æ¯

### æ•°æ®ç¤ºä¾‹
- **é²è¿…**: åŒ…å«ã€Šå‘å–Šã€‹çš„åˆ›ä½œè½¨è¿¹ (ä¸Šæµ·â†’åŒ—äº¬)
- **å·´é‡‘**: åŒ…å«ã€Šå®¶ã€‹çš„åˆ›ä½œå†ç¨‹ (æˆéƒ½â†’ä¸Šæµ·â†’å·´é»)

## ğŸ“Š æ€§èƒ½æŒ‡æ ‡

- **æ„å»ºæ—¶é—´**: < 2ç§’ (å¼€å‘æ¨¡å¼)
- **çƒ­é‡è½½**: < 500ms
- **åœ°å›¾åŠ è½½**: 1-3ç§’ (é¦–æ¬¡åŠ è½½)
- **çŠ¶æ€æ›´æ–°**: < 16ms (60fps)

## ğŸ”„ ä¸‹ä¸€æ­¥å¼€å‘è®¡åˆ’

### Sprint 1 - å™äº‹åŠ¨ç”» (è®¡åˆ’1å‘¨)
1. **InkLineç»„ä»¶**: å¢¨è¿¹çº¿æ¡åŠ¨ç”»æ•ˆæœ
2. **RippleNodeç»„ä»¶**: æ¶Ÿæ¼ªèŠ‚ç‚¹åŠ¨ç”»
3. **TimelineBuilder**: æ—¶é—´è½´æ„å»ºå™¨
4. **NarrativeScheduler**: å™äº‹è°ƒåº¦å™¨

### Sprint 2 - äº¤äº’å¢å¼º (è®¡åˆ’1å‘¨)
1. **PlaybackControl UI**: æ’­æ”¾æ§åˆ¶ç•Œé¢
2. **Overlayå¯¹æ¯”æ¨¡å¼**: å¤šä½œè€…å¯¹æ¯”æ˜¾ç¤º
3. **ç§»åŠ¨ç«¯é€‚é…**: å“åº”å¼å’Œè§¦æ§ä¼˜åŒ–
4. **æ€§èƒ½è°ƒä¼˜**: åŠ¨ç”»å’Œæ¸²æŸ“ä¼˜åŒ–

### Sprint 3 - ä¸ªæ€§åŒ– (è®¡åˆ’1å‘¨)
1. **ä¸ªäººæ˜Ÿå›¾**: ç”¨æˆ·ä¸ªæ€§åŒ–æ ‡è®°
2. **æ•°æ®å¯¼å‡º**: åœ°å›¾å’Œæ ‡è®°å¯¼å‡º
3. **åˆ†äº«åŠŸèƒ½**: ç¤¾äº¤åª’ä½“åˆ†äº«
4. **ç”¨æˆ·ä½“éªŒ**: æ— éšœç¢å’Œå›½é™…åŒ–

## ğŸ¯ æŠ€æœ¯äº®ç‚¹

1. **ä¸¥æ ¼ç±»å‹å®‰å…¨**: åŸºäºZodçš„ç«¯åˆ°ç«¯ç±»å‹éªŒè¯
2. **æ¨¡å—åŒ–æ¶æ„**: æ¸…æ™°çš„å…³æ³¨ç‚¹åˆ†ç¦»
3. **æ€§èƒ½ä¼˜åŒ–**: ç¼“å­˜ç­–ç•¥å’Œæ‡’åŠ è½½
4. **å·¥ç¨‹åŒ–**: å®Œæ•´çš„CI/CDå’Œä»£ç è´¨é‡ä¿éšœ
5. **å¯æ‰©å±•æ€§**: ä¸ºåç»­åŠŸèƒ½å¼€å‘é¢„ç•™æ¥å£

## ğŸ› å·²è§£å†³çš„æŠ€æœ¯é—®é¢˜

1. **ä¾èµ–ç‰ˆæœ¬å†²çª**: ä½¿ç”¨ `--legacy-peer-deps` è§£å†³
2. **TypeScriptç±»å‹é”™è¯¯**: å®‰è£…äº†å¿…è¦çš„ç±»å‹å®šä¹‰åŒ…
3. **åœ°å›¾æ¸²æŸ“æ€§èƒ½**: å®ç°äº†åˆ†å±‚æ¸²æŸ“ç­–ç•¥
4. **çŠ¶æ€ç®¡ç†å¤æ‚åº¦**: ä½¿ç”¨Zustandç®€åŒ–çŠ¶æ€é€»è¾‘

## ğŸ“ˆ ä»£ç è´¨é‡æŒ‡æ ‡

- **TypeScriptè¦†ç›–ç‡**: 100%
- **ç»„ä»¶æ¨¡å—åŒ–**: 9ä¸ªæ ¸å¿ƒæ¨¡å—
- **æ•°æ®éªŒè¯**: å®Œæ•´çš„Zod schema
- **é”™è¯¯å¤„ç†**: å…¨é¢çš„å¼‚å¸¸æ•è·
- **ä»£ç è§„èŒƒ**: ESLint + Prettier 100%é€šè¿‡

## ğŸš€ éƒ¨ç½²ä¿¡æ¯

- **å¼€å‘æœåŠ¡å™¨**: http://localhost:3000
- **æ¼”ç¤ºé¡µé¢**: http://localhost:3000/demo
- **æ„å»ºå‘½ä»¤**: `npm run build`
- **æµ‹è¯•å‘½ä»¤**: `npm test`

## ğŸ“ å¼€å‘æ€»ç»“

MVPç‰ˆæœ¬æˆåŠŸå®ç°äº†é¡¹ç›®çš„æ ¸å¿ƒæ¶æ„å’ŒåŸºç¡€åŠŸèƒ½ï¼Œä¸ºåç»­å¼€å‘å¥ å®šäº†åšå®åŸºç¡€ã€‚é€šè¿‡æ¨¡å—åŒ–è®¾è®¡å’Œä¸¥æ ¼çš„å·¥ç¨‹è§„èŒƒï¼Œç¡®ä¿äº†ä»£ç çš„å¯ç»´æŠ¤æ€§å’Œå¯æ‰©å±•æ€§ã€‚æ¼”ç¤ºé¡µé¢å……åˆ†å±•ç¤ºäº†ç³»ç»Ÿçš„æ ¸å¿ƒèƒ½åŠ›ï¼Œä¸ºç”¨æˆ·æä¾›äº†ç›´è§‚çš„ä½“éªŒã€‚

**å¼€å‘æ•ˆç‡**: åœ¨1å¤©å†…å®Œæˆäº†åŸè®¡åˆ’3å¤©çš„åŸºç¡€æ¶æ„å¼€å‘  
**æŠ€æœ¯å€ºåŠ¡**: æœ€å°åŒ–ï¼Œä¸»è¦é›†ä¸­åœ¨æ€§èƒ½ä¼˜åŒ–å’ŒUIç»†èŠ‚  
**ç”¨æˆ·ä½“éªŒ**: æµç•…çš„äº¤äº’å’Œæ¸…æ™°çš„è§†è§‰åé¦ˆ

é¡¹ç›®å·²å‡†å¤‡å¥½è¿›å…¥ä¸‹ä¸€é˜¶æ®µçš„å™äº‹åŠ¨ç”»å¼€å‘ã€‚