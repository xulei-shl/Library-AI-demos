# 评分过滤开关功能说明

## 功能概述

在图书向量化过程中，现在可以通过配置文件控制是否启用评分过滤功能。这提供了更大的灵活性，允许用户根据需要决定是否按照评分阈值过滤书籍。

## 配置说明

在 `config/book_vectorization.yaml` 文件中，`filters` 部分新增了 `enable_rating_filter` 配置项：

```yaml
# 数据过滤规则
filters:
  # 必填字段检查
  required_fields:
    - douban_summary
    - douban_title
    - douban_author
    - douban_catalog
  
  # 是否启用评分过滤
  enable_rating_filter: true  # 设置为 false 可禁用评分过滤
  
  # 评分阈值(根据索书号首字母)
  rating_thresholds:
    B: 8.2
    C: 7.5
    D: 7.1
    E: 7.4
    F: 7.1
    G: 7.3
    H: 7.2
    I: 7.3
    J: 7.7
    K: 8.0
    N: 7.6
    S: 7.4
    T: 7.6
    default: 7.5  # 其他分类默认阈值
```

## 使用方法

### 启用评分过滤（默认行为）

```yaml
enable_rating_filter: true
```

当设置为 `true` 时，系统会根据索书号首字母对应的评分阈值过滤书籍。只有评分达到或超过阈值的书籍才会被处理。

### 禁用评分过滤

```yaml
enable_rating_filter: false
```

当设置为 `false` 时，系统将跳过评分过滤步骤，所有具有必填字段的书籍都会被处理，不受评分限制。

### 兼容性说明

- 如果配置文件中未指定 `enable_rating_filter`，系统将默认启用评分过滤（`true`）
- 禁用评分过滤后，`rating_thresholds` 配置仍然保留，不会被使用，但也不会报错

## 实际应用场景

1. **全量数据处理**：当需要处理所有书籍而不考虑评分时，可以禁用评分过滤
2. **高质量数据集**：当只需要高质量书籍时，可以启用评分过滤
3. **测试环境**：在测试环境中可能需要禁用评分过滤以获取更多测试数据

## 注意事项

- 无论是否启用评分过滤，必填字段检查始终会执行
- 修改此配置后，需要重新启动向量化进程才能生效
- 此配置不影响已处理过的书籍，只影响新处理的书籍