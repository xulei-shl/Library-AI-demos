# 故障复盘报告
- **日期**: 2025-12-16
- **严重级别**: Medium

## 1. 问题现象
本地 MD 文档处理完成后，进入“文章过滤”阶段立即提示“所有文章都已成功过滤，跳过过滤步骤”，导致 `ArticleFilter` 的 LLM 调用完全没有执行。

## 2. 根本原因 (Root Cause)
MDReader 输出的记录未设置 `extract_status` 字段，Excel 中对应值为空。过滤阶段仅会处理 `extract_status == "success"` 的文章，因此所有 MD 文章都被视为“未提取完成”而被跳过，进而没有触发过滤逻辑。

## 3. 解决方案
- 在 `src/core/md_reader.py` 的 `MDDocument.to_dict` 中新增 `extract_status="success"` 与空的 `extract_error` 字段，明确标记这些文章已完成提取。
- 在 `src/core/storage.py` 的 `save_md_results` 中将 `full_text`、`extract_status`、`extract_error` 纳入必备列与默认列顺序，保证写入 Excel 时字段不会被丢失。

## 4. 预防措施
- 运行 MD 文档处理后，立即执行一次完整的过滤流程回归，确认日志里 `to_filter` 数量大于 0 并观察 LLM 调用。
- 后续如再新增离线数据注入流程，需在设计评审阶段核对关键状态字段（如 `extract_status`、`filter_status`）的默认值，避免被流程条件判断意外跳过。
