# 项目介绍

书香流年：图书馆年度借阅TOP10

![](https://xulei-pic-1258542021.cos.ap-shanghai.myqcloud.com/mdpic/1733646503749.png)

![](https://xulei-pic-1258542021.cos.ap-shanghai.myqcloud.com/mdpic/%E4%B9%A6%E9%A6%99%E6%B5%81%E5%B9%B4.gif)


## 数据处理

`python process_data.py`

1. 读者卡号脱敏处理

2. 不同读者借阅最多的前 10 本书

- 统计每个书名的出现次数，筛选出出现次数最多的前 top_n 个书名。
- 筛选出这些书名中读者卡号至少有 min_unique_readers 个不同的数据

3. 数据解析
节点结构：书名 -- 索书号 -- 借阅人 + 时间。

样例数据：
```json
{
    "书名1": {
        "总次数": 100,
        "B223.52/0272-35": [
            {
                "读者卡号": "123456",
                "出库时间": "2023-10-01"
            },
            {
                "读者卡号": "789012",
                "出库时间": "2023-10-02"
            }
        ],
        "B223.52/0272-6": [
            {
                "读者卡号": "4636456456",
                "出库时间": "2023-10-01"
            }
        ],
        "月份借阅量": {
            "1月": 8,
            "2月": 1,
            "3月": 14,
            "4月": 6,
            "5月": 10,
            "6月": 0,
            "7月": 22,
            "8月": 11,
            "9月": 14,
            "10月": 8,
            "11月": 14,
            "12月": 0
        }        
    },
    "书名2": {
        "总次数": 130,
        "A123.45/0123-45": [
            {
                "读者卡号": "345678",
                "出库时间": "2023-10-03"
            },
            {
                "读者卡号": "901234",
                "出库时间": "2023-10-04"
            }
        ],
        "月份借阅量": {
            "1月": 8,
            "2月": 1,
            "3月": 14,
            "4月": 6,
            "5月": 10,
            "6月": 0,
            "7月": 22,
            "8月": 11,
            "9月": 14,
            "10月": 8,
            "11月": 14,
            "12月": 0
        }
    }
}

```

4. AI 图书封面

- 当前是手动生成的，图片存储在css/img路径下
- 书与图片对应关系在 `data/book_image_map.json`中定义
- 其实这个流程也可以用脚本自动执行，但懒得做了。AI 工作流
    - 分析图书的主题风格
    - 推荐类似的艺术家
    - 根据艺术家风格和图书主题生成提示词
    - 然后调用api生图

5. 处理好的数据放在项目data路径下

样例数据可见 `exam-data`路径，已脱敏

## 运行

python -m http.server

浏览器访问 http://localhost:8000

https://github.com/user-attachments/assets/27826c08-a5d1-43bb-af3b-c6803942bf31