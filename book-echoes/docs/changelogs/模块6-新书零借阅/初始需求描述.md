# 睡美人：新书零借阅图书筛选与推荐

## 基本思路

1. 某个月份新验收图书（data\new\验收.xlsx），在当月及其未来三个月内（data\new\近四月借阅.xlsx）零借阅图书，筛选出来后，得到书目清单（含txt统计分析报告）（结果写入runtime\outputs\new）
    - 零借阅统计，根据条码进行统计（馆藏条码 = 书目条码）

2. 再进行题名（config\filters\title_keywords.txt）、分类号过滤（config\filters\call_number_clc.txt），得到筛选后的书目清单（含txt统计分析报告）
3. 经过前2个步骤得到的书目清单，进行db查重，将有的书目信息写回excel中；未查到的数据执行豆瓣 ISBN检索获取评分、链接、评论人数写回excel；经过豆瓣评分和评论人数等条件筛选，满足条件的执行豆瓣API，获取完整信息写回excel，并执行初选结果，并生成txt统计分析报告。
4. 对初选结果通过的数据再执行大模型三轮评选，得到最终的推荐书目清单（含txt统计分析报告）。


---

这个新书零借阅的统计分析与推荐的逻辑，只在最开始第一步的数据分析不同，后续的题名分类号过滤， 豆瓣ISBN检索，过滤分析，API调用，大模型评选等步骤都想同

另外验收的原始excel中，几个列名与借阅数据excel的列名也不同，，可以首先将验收excel的列`馆藏条码`改为`书目条码`，`标识号`改为`isbn`

另一个不同点是FOLIO ISBN获取，新书验收的原始excel（data\new\验收.xlsx）中`isbn`列（原`标识号`列），就是isbn取值，有的有值有的没有值，这个需要过滤，只有不满足的才执行FOLIO ISBN获取，并写回`isbn`列中。