# 任务计划：修改文章分析器以适应新的数据格式要求

## 目标
根据新的用户需求和大模型输出格式，修改 `article_analyzer.py` 文件

## 步骤清单
- [x] 分析当前代码结构和新的JSON格式要求
- [x] 修改用户输入字段逻辑（title + full_text/content）
- [x] 更新输出字段映射以匹配新的JSON格式
- [x] 添加原始响应保存逻辑
- [x] 实现安全的字段解析，避免解析失败影响整体流程
- [x] 创建测试脚本验证功能
- [x] 验证输出格式是否符合要求

## 具体修改点
1. 输入字段：`title` + `full_text`（fallback to `content`）
2. 输出字段：
   - `llm_raw_response`: 保存原始JSON响应
   - `llm_decision`: Boolean值
   - `llm_score`: 整数评分
   - `llm_primary_dimension`: 主要维度
   - `llm_summary`: 总结
   - `llm_reason`: 理由
   - `llm_tags`: JSON字符串数组
   - `llm_keywords`: JSON字符串数组
   - `llm_mentioned_books`: JSON字符串数组（书籍对象）
   - `llm_book_clues`: JSON字符串数组（推荐方向）

## 错误处理策略
- 如果单个字段解析失败，跳过该字段
- 只要原始响应保存成功就算任务完成
- 添加适当的日志记录

## 测试结果
✅ 所有测试通过，功能正常工作
